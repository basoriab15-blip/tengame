<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Juguetes Saltarines</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjDUTGz41LFm3BZOS6Rh4Suqhsu191Nga0kw&s') no-repeat center center fixed;
    background-size: cover;
    font-family: Arial, sans-serif;
    color: white;
    text-align: center;
    overflow-x: hidden;
  }
  header {
    background: rgba(0,0,0,0.7);
    color: #FFD700;
    font-size: 32px;
    font-weight: bold;
    padding: 20px;
  }
  canvas {
    display: block;
    margin: 20px auto;
    background: green;
  }
  .historia {
    max-width: 800px;
    margin: 40px auto;
    padding: 20px;
    background: rgba(0,0,0,0.6);
    border-radius: 12px;
    text-align: left;
  }
  .historia h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  .historia p {
    line-height: 1.6;
  }
  .final {
    text-align: center;
    margin-top: 20px;
    font-size: 20px;
    font-weight: bold;
    color: #FFD700;
  }
</style>
</head>
<body>
<header>Juguetes Saltarines</header>

<canvas id="gameCanvas" width="500" height="600"></canvas>

<div class="historia">
  <h2>Historia</h2>
  <p>Este juego nació de la idea de crear un mundo lleno de juguetes que nunca dejan de saltar. Cada juguete representa la energía, la diversión y la creatividad de los niños, y el objetivo es mantenerlos rebotando sin que se caigan.</p>
  <h2>Motivación</h2>
  <p>Que el más pro pueda llegar a 10000 puntos manteniendo todos los juguetes en movimiento y demostrando reflejos y paciencia.</p>
  <div class="final">¡A divertirse y superar récords!</div>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let toys = [];
let score = 0;
let gamePaused = false;
let gameOver = false;
let inMenu = true;
let frameCount = 0;

class Toy {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.r = 15;
    this.vy = -5; // fuerza inicial hacia arriba
    this.gravity = 0.3;
  }

  update() {
    this.vy += this.gravity;
    this.y += this.vy;

    // rebote en el suelo
    if(this.y + this.r > canvas.height) {
      this.y = canvas.height - this.r;
      this.vy = -Math.abs(this.vy) * 0.8;
    }
  }

  show() {
    ctx.fillStyle = 'white';
    ctx.strokeStyle = 'black';
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
    ctx.fill();
    ctx.stroke();
  }

  bounce() {
    this.vy = -7; // rebote al hacer clic
  }
}

function resetGame() {
  toys = [];
  score = 0;
  gamePaused = false;
  gameOver = false;
  inMenu = true;
  frameCount = 0;
}

function drawMenu() {
  ctx.fillStyle = 'white';
  ctx.font = '30px Arial';
  ctx.textAlign = 'center';
  ctx.fillText('Juguetes Saltarines', canvas.width/2, canvas.height/2 - 60);
  ctx.font = '20px Arial';
  ctx.fillText('Haz clic para comenzar', canvas.width/2, canvas.height/2 - 20);
  ctx.fillText("Presiona 'P' para pausar/reanudar", canvas.width/2, canvas.height/2 + 20);
}

function drawGameOver() {
  ctx.fillStyle = 'red';
  ctx.font = '48px Arial';
  ctx.textAlign = 'center';
  ctx.fillText('Game Over', canvas.width/2, canvas.height/2 - 40);
  ctx.font = '20px Arial';
  ctx.fillText('Haz clic para reiniciar', canvas.width/2, canvas.height/2);
}

function draw() {
  // fondo verde
  ctx.fillStyle = 'green';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  if(inMenu) {
    drawMenu();
    return;
  }

  if(gameOver) {
    drawGameOver();
    return;
  }

  if(gamePaused) {
    ctx.fillStyle = 'white';
    ctx.font = '40px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Juego Pausado', canvas.width/2, canvas.height/2 - 40);
    ctx.font = '20px Arial';
    ctx.fillText("Presiona 'P' para continuar", canvas.width/2, canvas.height/2);
    return;
  }

  // generar juguetes
  if(frameCount % 50 === 0) {
    let x = Math.random()*(canvas.width-30)+15;
    toys.push(new Toy(x, canvas.height-20));
  }

  // actualizar y mostrar juguetes
  toys.forEach(t => {
    t.update();
    t.show();
  });

  // eliminar juguetes que se caen y aumentar score
  for(let i=toys.length-1;i>=0;i--){
    if(toys[i].y > canvas.height + toys[i].r){
      toys.splice(i,1);
      score++;
    }
  }

  // mostrar puntaje
  ctx.fillStyle = 'white';
  ctx.font = '24px Arial';
  ctx.textAlign = 'left';
  ctx.fillText('Score: ' + score, 10, 40);

  frameCount++;
}

function gameLoop() {
  draw();
  requestAnimationFrame(gameLoop);
}
gameLoop();

document.addEventListener('keydown', e => {
  if(e.key === 'p' || e.key === 'P') gamePaused = !gamePaused;
});

canvas.addEventListener('mousedown', e => {
  if(inMenu){
    inMenu = false;
  } else if(gameOver){
    resetGame();
  } else if(!gamePaused){
    toys.forEach(t => {
      const dx = e.offsetX - t.x;
      const dy = e.offsetY - t.y;
      if(Math.sqrt(dx*dx+dy*dy) < t.r){
        t.bounce();
      }
    });
  }
});
</script>
</body>
</html>

