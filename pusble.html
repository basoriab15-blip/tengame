<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Puzzle Mania üß©</title>
<style>
  body {
    margin:0;
    padding:0;
    text-align:center;
    background:black;
    color:white;
    font-family:Arial, sans-serif;
  }
  header {
    font-size:32px;
    padding:20px;
    background: rgba(0,0,0,0.7);
  }
  canvas {
    display:block;
    margin:20px auto;
    background: #006400; /* Fondo verde */
  }
  .historia {
    max-width:800px;
    margin:20px auto;
    padding:15px;
    background: rgba(0,0,0,0.7);
    border-radius:10px;
    text-align:left;
  }
  .historia h2 {
    text-align:center;
    margin-bottom:10px;
  }
  .historia p {
    line-height:1.5;
  }
  .motivacion {
    text-align:center;
    margin-top:10px;
    font-size:20px;
    font-weight:bold;
    color:#FFD700;
  }
</style>
</head>
<body>
<header>Puzzle Mania üß©</header>

<canvas id="gameCanvas" width="400" height="400"></canvas>

<div class="historia">
  <h2>Historia del Juego</h2>
  <p>
    "Puzzle Mania" fue creado para entrenar la mente mientras te diviertes. Cada pieza
    del puzzle tiene un lugar correcto, y el jugador debe moverlas para completar la imagen.
    Con cada nivel, la dificultad aumenta y se requieren m√°s movimientos y concentraci√≥n.
  </p>
</div>
<div class="motivacion">Que el m√°s pro pueda resolverlo en el menor tiempo üèÜüß©</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let inMenu = true;
let gamePaused = false;
let puzzleSize = 4; // 4x4 puzzle
let tileSize = canvas.width / puzzleSize;
let tiles = [];
let emptyX = puzzleSize-1;
let emptyY = puzzleSize-1;
let score = 0;

// Inicializar puzzle
function initPuzzle(){
  tiles = [];
  for(let y=0;y<puzzleSize;y++){
    tiles[y]=[];
    for(let x=0;x<puzzleSize;x++){
      tiles[y][x] = y*puzzleSize + x + 1;
    }
  }
  tiles[puzzleSize-1][puzzleSize-1] = 0; // espacio vac√≠o
  emptyX = puzzleSize-1;
  emptyY = puzzleSize-1;
  shufflePuzzle();
  score=0;
}

function shufflePuzzle(){
  for(let i=0;i<1000;i++){
    let dirs = [[0,1],[1,0],[0,-1],[-1,0]];
    let dir = dirs[Math.floor(Math.random()*4)];
    let nx = emptyX + dir[0];
    let ny = emptyY + dir[1];
    if(nx>=0 && nx<puzzleSize && ny>=0 && ny<puzzleSize){
      tiles[emptyY][emptyX] = tiles[ny][nx];
      tiles[ny][nx] = 0;
      emptyX = nx;
      emptyY = ny;
    }
  }
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(inMenu){
    ctx.fillStyle="white";
    ctx.font="30px Arial";
    ctx.textAlign="center";
    ctx.fillText("Puzzle Mania üß©", canvas.width/2, canvas.height/2-60);
    ctx.font="20px Arial";
    ctx.fillText("Haz clic para comenzar", canvas.width/2, canvas.height/2-20);
    ctx.fillText("Presiona 'P' para pausar/reanudar", canvas.width/2, canvas.height/2+20);
    requestAnimationFrame(draw);
    return;
  }

  // Dibujar puzzle
  for(let y=0;y<puzzleSize;y++){
    for(let x=0;x<puzzleSize;x++){
      if(tiles[y][x]!==0){
        ctx.fillStyle="#FFD700";
        ctx.fillRect(x*tileSize, y*tileSize, tileSize-2, tileSize-2);
        ctx.fillStyle="black";
        ctx.font="20px Arial";
        ctx.textAlign="center";
        ctx.textBaseline="middle";
        ctx.fillText(tiles[y][x], x*tileSize + tileSize/2, y*tileSize + tileSize/2);
      }
    }
  }

  // Puntaje
  ctx.fillStyle="white";
  ctx.font="20px Arial";
  ctx.textAlign="left";
  ctx.fillText("Movimientos: "+score,10,20);

  if(gamePaused){
    ctx.fillStyle="yellow";
    ctx.font="40px Arial";
    ctx.textAlign="center";
    ctx.fillText("Juego Pausado",canvas.width/2,canvas.height/2);
    ctx.font="20px Arial";
    ctx.fillText("Presiona 'P' para continuar",canvas.width/2,canvas.height/2+30);
  }

  requestAnimationFrame(draw);
}

canvas.addEventListener("mousedown",function(e){
  if(inMenu){ inMenu=false; initPuzzle(); return; }
  if(gamePaused) return;
  const rect=canvas.getBoundingClientRect();
  const mx=e.clientX-rect.left;
  const my=e.clientY-rect.top;
  let x = Math.floor(mx/tileSize);
  let y = Math.floor(my/tileSize);
  if((Math.abs(x-emptyX)+Math.abs(y-emptyY))===1){
    tiles[emptyY][emptyX] = tiles[y][x];
    tiles[y][x] = 0;
    emptyX = x;
    emptyY = y;
    score++;
  }
});

document.addEventListener("keydown",function(e){
  if(e.key==="p"||e.key==="P") gamePaused=!gamePaused;
});

initPuzzle();
draw();
</script>
</body>
</html>












